@using CSSPWebTools.Views.ReportType.Resources;
@using CSSPWebTools.Controllers;
@using CSSPEnumsDLL.Enums;
@using CSSPEnumsDLL.Services;
@using CSSPModelsDLL.Models;
@using System.Linq;

@{
    ReportTypeController ReportTypeController = (ReportTypeController)ViewBag.ReportTypeController;
    List<ReportTypeModel> reportTypeModelList = (List<ReportTypeModel>)ViewBag.ReportTypeModelList;
    BaseEnumService _BaseEnumService = new BaseEnumService(ViewBag.Language);
    TVTypeEnum TVType = (TVTypeEnum)ViewBag.TVType;
    int TVItemID = (int)ViewBag.TVItemID;
}

@if (reportTypeModelList.Count == 0)
{
    <div>@(string.Format(ReportTypeViewRes.NoReportTypeCreatedYetFor_, TVType.ToString()))</div>
}
else
{
    foreach (ReportTypeModel reportTypeModel in reportTypeModelList)
    {
        <div class="ReportTypeItemTop panel panel-success">
            <div class="panel-heading">
                <div class="panel-title">
                    <div>
                        @switch (reportTypeModel.FileType)
                        {
                            case FileTypeEnum.DOCX:
                                {
                                    <img src="~/Images/Word_icon16.png" />
                                }
                                break;
                            case FileTypeEnum.KMZ:
                                {
                                    <img src="~/Images/GoogleEarth_icon16.png" />
                                }
                                break;
                            case FileTypeEnum.XLSX:
                                {
                                    <img src="~/Images/Excel_icon16.png" />
                                }
                                break;
                            default:
                                {
                                    <img src="~/Images/GeneralFile_icon16.png" />
                                }
                                break;
                        }
                        <span>&nbsp;&nbsp;@reportTypeModel.Name</span>&nbsp;&nbsp;&nbsp;
                        @*<button class="jbReportTypeEdit btn btn-default">
                            <span class="glyphicon glyphicon-pencil" title="@ReportTypeViewRes.Edit"></span>
                        </button>&nbsp;&nbsp;&nbsp;*@
                        <span>@ReportTypeViewRes.FileNameWillStartWith : @(reportTypeModel.StartOfFileName)</span>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <div class="ReportTypeEdit hidden">
                    @Html.Action("_reportTypeEdit", "ReportType", new { ReportTypeID = reportTypeModel.ReportTypeID, TVItemID = TVItemID })
                </div>
                <div class="ParametersTop">
                    <label>@reportTypeModel.Description</label>
                    <div class="DocumentListDiv">
                        @Html.Action("_documentList", "Document", new { ReportTypeID = reportTypeModel.ReportTypeID, TVItemID = TVItemID })
                    </div>
                    <div class="DocumentGenerateDiv">
                        @Html.Action("_documentParameters", "Document", new { ReportTypeID = reportTypeModel.ReportTypeID, TVItemID = TVItemID, TVFileTVItemID = 0 })
                    </div>
                </div>
            </div>
        </div>
    }
}
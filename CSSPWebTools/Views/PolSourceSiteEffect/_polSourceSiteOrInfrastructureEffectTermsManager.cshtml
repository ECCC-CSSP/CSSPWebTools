@using CSSPWebTools.Views.PolSourceSiteEffect.Resources;
@using CSSPWebTools.Models;
@using CSSPEnumsDLL.Enums;
@using CSSPEnumsDLL.Services;
@using CSSPModelsDLL.Models;
@using CSSPWebTools.Controllers;

@{
    List<PolSourceSiteEffectTermModel> polSourceSiteEffectTermModelAllList = (List<PolSourceSiteEffectTermModel>)ViewBag.PolSourceSiteEffectTermModelAllList;
}

<div class="panel panel-default">
    <div class="panel-heading">
        <div class="panel-title">
            <span class="h4">@PolSourceSiteEffectViewRes.ExistingEffectTerms</span>
        </div>
    </div>
    <div class="panel-body">
        <ul class="list-unstyled">
            @foreach (PolSourceSiteEffectTermModel polSourceSiteEffectTermModel in polSourceSiteEffectTermModelAllList.Where(c => c.IsGroup == true).OrderBy(c => c.EffectTermEN))
            {
                bool HasChild = polSourceSiteEffectTermModelAllList.Where(c => c.IsGroup == false && c.UnderGroupID == polSourceSiteEffectTermModel.PolSourceSiteEffectTermID).Any();

                <li class="PolSourceSiteEffectTerm form-inline">
                    <div class="text-nowrap">
                        <span class="h3">@PolSourceSiteEffectViewRes.GroupID: @polSourceSiteEffectTermModel.PolSourceSiteEffectTermID</span>
                        &nbsp;(en)&nbsp;<input class="form-control" type="text" name="EffectTermEN" size="4" placeholder="@polSourceSiteEffectTermModel.EffectTermEN" value="@polSourceSiteEffectTermModel.EffectTermEN" />
                        &nbsp;(fr)&nbsp;<input class="form-control" type="text" name="EffectTermFR" size="4" placeholder="@polSourceSiteEffectTermModel.EffectTermFR" value="@polSourceSiteEffectTermModel.EffectTermFR" />
                        <button class="jbPolSourceSiteEffectTermsModify btn btn-default"
                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel.PolSourceSiteEffectTermID"
                                data-isgroup="@polSourceSiteEffectTermModel.IsGroup"
                                data-undergroupid="@polSourceSiteEffectTermModel.UnderGroupID">
                            @PolSourceSiteEffectViewRes.Modify
                        </button>
                        @if (!HasChild)
                        {
                            <button class="jbPolSourceSiteEffectTermsDelete btn btn-default"
                                    data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel.PolSourceSiteEffectTermID"
                                    data-effecttermen="@polSourceSiteEffectTermModel.EffectTermEN">
                                @PolSourceSiteEffectViewRes.Delete
                            </button>
                            <button class="jbPolSourceSiteEffectTermsIsGroup btn btn-success"
                                    data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel.PolSourceSiteEffectTermID"
                                    data-isgroup="@polSourceSiteEffectTermModel.IsGroup">
                                @PolSourceSiteEffectViewRes.IsGroup
                            </button>
                        }
                        @if (HasChild)
                        {
                            <ul class="list-unstyled">
                                @foreach (PolSourceSiteEffectTermModel polSourceSiteEffectTermModel2 in polSourceSiteEffectTermModelAllList.Where(c => c.IsGroup == false && c.UnderGroupID == polSourceSiteEffectTermModel.PolSourceSiteEffectTermID).OrderBy(c => c.EffectTermEN))
                                {
                                    <li class="PolSourceSiteEffectTerm form-inline">
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        &nbsp;(en)&nbsp;<input class="form-control" type="text" name="EffectTermEN" size="4" placeholder="@polSourceSiteEffectTermModel2.EffectTermEN" value="@polSourceSiteEffectTermModel2.EffectTermEN" />
                                        &nbsp;(fr)&nbsp;<input class="form-control" type="text" name="EffectTermFR" size="4" placeholder="@polSourceSiteEffectTermModel2.EffectTermFR" value="@polSourceSiteEffectTermModel2.EffectTermFR" />
                                        <button class="jbPolSourceSiteEffectTermsModify btn btn-default"
                                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel2.PolSourceSiteEffectTermID"
                                                data-isgroup="@polSourceSiteEffectTermModel2.IsGroup"
                                                data-undergroupid="@polSourceSiteEffectTermModel2.UnderGroupID">
                                            @PolSourceSiteEffectViewRes.Modify
                                        </button>
                                        <button class="jbPolSourceSiteEffectTermsDelete btn btn-default"
                                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel2.PolSourceSiteEffectTermID"
                                                data-effecttermen="@polSourceSiteEffectTermModel2.EffectTermEN">
                                            @PolSourceSiteEffectViewRes.Delete
                                        </button>
                                        <button class="jbPolSourceSiteEffectTermsSendToGroup btn btn-default"
                                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel2.PolSourceSiteEffectTermID">
                                            @PolSourceSiteEffectViewRes.SendToGroup
                                        </button>
                                        <span>@PolSourceSiteEffectViewRes.GroupID:&nbsp;</span>
                                        <input type="text" size="2" name="UnderGroupID" class="isnumber form-control" />
                                    </li>
                                }
                            </ul>
                        }
                    </div>
                </li>
            }
        </ul>
        <ul class="list-unstyled">
            <li>&nbsp;</li>
            <li>&nbsp;</li>
            @foreach (PolSourceSiteEffectTermModel polSourceSiteEffectTermModel3 in polSourceSiteEffectTermModelAllList.Where(c => c.IsGroup == false && c.UnderGroupID == null).OrderBy(c => c.EffectTermEN))
            {
                <li class="PolSourceSiteEffectTerm form-inline">
                    <div class="text-nowrap">
                        &nbsp;(en)&nbsp;<input class="form-control" type="text" name="EffectTermEN" size="4" placeholder="@polSourceSiteEffectTermModel3.EffectTermEN" value="@polSourceSiteEffectTermModel3.EffectTermEN" />
                        &nbsp;(fr)&nbsp;<input class="form-control" type="text" name="EffectTermFR" size="4" placeholder="@polSourceSiteEffectTermModel3.EffectTermFR" value="@polSourceSiteEffectTermModel3.EffectTermFR" />
                        <button class="jbPolSourceSiteEffectTermsModify btn btn-default"
                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel3.PolSourceSiteEffectTermID"
                                data-isgroup="@polSourceSiteEffectTermModel3.IsGroup"
                                data-undergroupid="@polSourceSiteEffectTermModel3.UnderGroupID">
                            @PolSourceSiteEffectViewRes.Modify
                        </button>
                        <button class="jbPolSourceSiteEffectTermsDelete btn btn-default"
                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel3.PolSourceSiteEffectTermID"
                                data-effecttermen="@polSourceSiteEffectTermModel3.EffectTermEN">
                            @PolSourceSiteEffectViewRes.Delete
                        </button>
                        <button class="jbPolSourceSiteEffectTermsIsGroup btn btn-default"
                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel3.PolSourceSiteEffectTermID"
                                data-isgroup="@polSourceSiteEffectTermModel3.IsGroup">
                            @PolSourceSiteEffectViewRes.IsGroup
                        </button>
                        <button class="jbPolSourceSiteEffectTermsSendToGroup btn btn-default"
                                data-polsourcesiteeffecttermid="@polSourceSiteEffectTermModel3.PolSourceSiteEffectTermID">
                            @PolSourceSiteEffectViewRes.SendToGroup
                        </button>
                        <span>@PolSourceSiteEffectViewRes.GroupID:&nbsp;</span>
                        <input type="text" size="2" name="UnderGroupID" class="isnumber form-control" />
                    </div>
                </li>
            }
        </ul>
        <ul class="list-unstyled PolSourceSiteEffectTerm">
            <li><p>&nbsp;</p></li>
            <li>
                <h3>@PolSourceSiteEffectViewRes.Add @PolSourceSiteEffectViewRes.EffectTerm</h3>
            </li>
            <li>
                <label for="EffectTermEN">
                    <span>(en)</span>
                    <input class="form-control" placeholder="@PolSourceSiteEffectViewRes.EffectTerm (en)" type="text" name="EffectTermEN" />
                </label>
                <label for="EffectTermFR">
                    <span>(fr)</span>
                    <input class="form-control" placeholder="@PolSourceSiteEffectViewRes.EffectTerm (fr)" type="text" name="EffectTermFR" />
                </label>
            </li>
            <li>
                <label for="UnderGroupID">
                    <span>@PolSourceSiteEffectViewRes.Place @PolSourceSiteEffectViewRes.UnderGroup</span>
                    <input class="isnumber form-control" type="text" name="UnderGroupID" />
                </label>
                <label for="IsGroup">
                    <span>@PolSourceSiteEffectViewRes.IsGroup</span>
                    <input class="checkbox-inline" type="checkbox" name="IsGroup" />
                </label>
            </li>
            <li>
                <button class="jbPolSourceSiteEffectTermsAdd btn btn-default"
                        data-polsourcesiteeffecttermid="0">
                    @PolSourceSiteEffectViewRes.Add @PolSourceSiteEffectViewRes.EffectTerm
                </button>
            </li>
        </ul>
    </div>
</div>
